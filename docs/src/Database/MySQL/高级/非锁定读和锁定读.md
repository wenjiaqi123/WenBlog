一致性非锁定读和锁定读
===

前言
---

假设有一张表如下

|  id  |  name  | age  |
| :--: | :----: | :--: |
|  1   | 闻家奇 |  18  |

现在要更新年龄加 1

```sql
update t_user
set age = age + 1
where id = 1;
```

假设由于系统性能不行，该更新命令耗时很长需要10分钟，假设从 12:00 开始执行，要到 12:10 才能执行结束。



### 非锁定读

那么在 12:05 的时候，有人来查询一下 `select * from t_user where id = 1; ` 仍然查询到 age = 18，这就是非锁定读

因为在 12:00 - 12:10 的时间里，update 语句应该是锁定这条数据，不让其他数据进行操作的，但是可以读取。这叫非锁定读



### 锁定读

那么在 12:05 的时候，有人来查询一下 `select * from t_user where id = 1; ` 等待5分钟到 12:10 才能读取到 age = 19，这就是锁定读

因为在 12:00 - 12:10 的时间里，update 语句应该是锁定这条数据，不让其他数据进行操作的，读取的操作被阻塞。这叫锁定读

